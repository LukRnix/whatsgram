<ng-container *ngIf="chat$ |async as chat">
  <ion-header>
    <ion-toolbar>
      <div class="full-width flex align-items-center" style="padding: 0 4px">
        <ion-buttons slot="start">
          <ion-back-button defaultHref="/chats"></ion-back-button>
        </ion-buttons>
        <div (click)="openGroup(chat.isGroupChat)" class="header">
          <ion-avatar style="width: 40px; height: 40px">
            <img [src]="chat.info | photoUrl:chat.info.alt" />
          </ion-avatar>
          <ion-title>{{chat.info.displayName}}</ion-title>
        </div>
      </div>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list class="message-container" *ngIf="message$">
      <app-chat-message
        *ngFor="let message of message$ | async"
        [message]="message"
        [userId]="userId"
        [id]="message.id"
      ></app-chat-message>
      <!-- <ion-item class="unread">
            {{unreadMessageRefs.length}} ungelesene Nachrichten
          </ion-item> -->
    </ion-list>
  </ion-content>

  <app-chat-footer [chat]="chat"></app-chat-footer>
</ng-container>
